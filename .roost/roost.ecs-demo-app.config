build:
  type: text
  content: |-
    #!/bin/sh

    # make all
    # docker build

    echo "FROM ubuntu:18.04

    # Install dependencies
    RUN apt-get update && \
     apt-get -y install apache2

    # Install apache and write ecs-demo-app message
    RUN echo 'ecs-demo-app!' > /var/www/html/index.html

    # Configure apache
    RUN echo '. /etc/apache2/envvars' > /root/run_apache.sh && \
     echo 'mkdir -p /var/run/apache2' >> /root/run_apache.sh && \
     echo 'mkdir -p /var/lock/apache2' >> /root/run_apache.sh && \ 
     echo '/usr/sbin/apache2 -D FOREGROUND' >> /root/run_apache.sh && \ 
     chmod 755 /root/run_apache.sh

    EXPOSE 80

    CMD /root/run_apache.sh" >> Dockerfile
    docker build -t ecs-demo-app .
deploy:
  type: text
  content: |
    #/bin/sh
    docker images --filter reference=ecs-demo-app
    docker run -p 80:80 ecs-demo-app
    #aws ecr create-repository --repository-name ecs-demo-app-repository --region us-west-1
    #docker tag ecs-demo-app $(aws_account_id).dkr.ecr.us-west-1.amazonaws.com/ecs-demo-#app-repository
    #docker push $(aws_account_id).dkr.ecr.us-west-1.amazonaws.com/ecs-demo-app-repository
test: []
uninstall:
  type: None
  content: ''
dockerCompose: ''
lastUpdatedBy: Akshat Jain
lastUpdatedOn: 2023-01-17T12:50:57.255Z
